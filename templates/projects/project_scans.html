{% extends 'projects/project_data.html' %}
{% load static %}
{% block content %}
    <hr>
    <div class="row" style="padding-bottom: 10px">
        <div class="col-md-12">
            <div class="float-right">
                {% if user.is_superuser == True %}
                    <div class="btn-group" role="group" aria-label="Basic example">
                        <form id="myForm" method="POST" action="{% url 'projects:redirect_to_dast' %}">
                            {% csrf_token %}
                            <input type="hidden" id="project_uuid" name="project_uuid" value="{{ project_dat.uu_id }}">
                            <input type="hidden" id="group_uuid" name="group_uuid"
                                   value="{{ project_dat.group.uu_id }}">
                            <button class="btn btn-primary btn-mini" title="Launch Scan" data-toggle="tooltip"
                                    data-placement="top" type="submit">
                                <i class="fas fa-plus-circle"></i>
                                Launch Scan
                            </button>
                        </form>
                    </div>
                    <div class="btn-group" role="group" aria-label="Basic example">
                        <a href="{% url 'report_upload:upload' %}" class="btn btn-primary btn-mini"
                           data-toggle="tooltip" data-placement="top" title="Upload XML Report"><i
                                class="fas fa-upload"></i> Upload </a>
                    </div>
                {% endif %}
            </div>

        </div>
    </div>


    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h5>Dynamic Scan List</h5>
                        </div>
                        <div class="col-md-6 text-right">
                            <button type="button" class="btn btn-sm btn-light-del-scan" data-toggle="tooltip"
                                    data-placement="top"
                                    title="Delete selected scans">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="row">
                        <!-- column -->
                        <div class="col-lg-12">
                            <div class="table-responsive">
                                <table id="data_table" class="table table-striped table-bordered">
                                    <thead>
                                    <tr>
                                        <th width="5%">
                                            <label class="customcheckbox m-b-20">
                                                <input type="checkbox" id="mainCheckboxDynamic">
                                                <span class="checkmark"></span>
                                            </label>
                                        </th>
                                        <th width="20%">URL</th>
                                        <th>Scanner</th>
                                        <th>Status</th>
                                        <th>Date Time</th>
                                        <th>Total</th>
                                        <th>Critical</th>
                                        <th>High</th>
                                        <th>Medium</th>
                                        <th>Low</th>
                                        <th width="5%">Duplicates</th>

                                    </tr>
                                    </thead>
                                    <tbody>{% for data in web_scan_dat %}
                                        <tr data-target="#">
                                            <td>
                                                <form>
                                                    <label class="customcheckbox">
                                                        <input type="checkbox" class="listCheckboxDynamic"
                                                               value="{{ data.scan_id }}"
                                                               name="del_scan_id"
                                                               onClick="reload">
                                                        <span class="checkmark"></span>
                                                    </label>
                                                </form>
                                            </td>
                                            <td width="20%"><a
                                                    href="{% url 'webscanners:list_vuln' %}?scan_id={{ data.scan_id }}&scanner={{ data.scanner }}">{{ data.scan_url }}</a>
                                            </td>
                                            <td>{% with scanType=data.scanner %}
                                                <div class="p-1"><img src="{{ PARSER_DICT | get_icon:scanType }}"
                                                                      alt="user"
                                                                      width="30" class="rounded-circle"
                                                                      data-toggle="tooltip"
                                                                      data-placement="top"
                                                                      title="


                                                                              {{ PARSER_DICT | get_displayName:scanType }}">
                                                </div>
                                            {% endwith %}
                                            </td>
                                            <td width="20%">
                                                <div>
                                                    <div class="d-flex no-block align-items-center">
                                                        <span>{{ data.scan_status }}{{ data.vul_status }}% Completed</span>
                                                    </div>
                                                    <div class="progress{% if data.scan_status != '100.0' %} active progress-striped{% endif %}">
                                                        <div class="progress-bar progress-bar-striped"
                                                             role="progressbar"
                                                             style="width:
                                                                     {{ data.scan_status }}{{ data.vul_status }}%"
                                                             aria-valuenow="10" aria-valuemin="0"
                                                             aria-valuemax="100"></div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td width="20%">{{ data.date_time }}</td>
                                            <td><span
                                                    class="badge badge-pill badge-dark">{{ data.total_vul }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-critical">{{ data.critical_vul }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-danger">{{ data.high_vul }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-warning">{{ data.medium_vul }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-info">{{ data.low_vul }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-secondary">{{ data.total_dup }}</span>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h5>Static Scan List</h5>
                        </div>
                        <div class="col-md-6 text-right">
                            <button type="button" class="btn btn-sm btn-light btn-light-del-static-scan"
                                    data-toggle="tooltip"
                                    data-placement="top" title="Delete selected scans">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="row">
                        <!-- column -->
                        <div class="col-lg-12">
                            <div class="table-responsive">
                                <table id="data_table_static" class="table table-striped table-bordered">
                                    <thead>
                                    <tr>
                                        <th><label class="customcheckbox m-b-20">
                                            <input type="checkbox" id="mainCheckboxStatic">
                                            <span class="checkmark"></span>
                                        </label>
                                        </th>
                                        <th>Target</th>
                                        <th> Scanner</th>
                                        <th>Date Time</th>
                                        <th>Total Vulnerability</th>
                                        <th>Critical</th>
                                        <th>High</th>
                                        <th>Medium</th>
                                        <th>Low</th>
                                        <th>Duplicated</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <!-- add your scanners here  -->
                                    {% for data in static_scan %}
                                        <tr data-target="#">
                                            <td>{% csrf_token %}
                                                <form>
                                                    <label class="customcheckbox">
                                                        <input type="checkbox" class="listCheckboxStatic"
                                                               value="{{ data.scan_id }}"
                                                               name="del_scan_id"
                                                               onClick="reload">
                                                        <span class="checkmark"></span>
                                                    </label>
                                                </form>
                                            </td>
                                            <td width="20%">
                                                <a href="{% url 'staticscanners:list_vuln' %}?scan_id={{ data.scan_id }}&scanner={{ data.scanner }}">{{ data.target }}</a>
                                            </td>
                                            {# <td>{{ data.target }}</td> #}
                                            <td>{% with scanType=data.scanner %}
                                                <div class="p-1"><img src="{{ PARSER_DICT | get_icon:scanType }}"
                                                                      alt="user"
                                                                      width="30" class="rounded-circle"
                                                                      data-toggle="tooltip"
                                                                      data-placement="top"
                                                                      title="


                                                                              {{ PARSER_DICT | get_displayName:scanType }}">
                                                </div>
                                            {% endwith %}
                                            </td>
                                            <td width="20%">{{ data.date_time }}</td>
                                            <td><span
                                                    class="badge badge-pill badge-dark">{{ data.total_vul }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-critical">{{ data.critical_vul }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-danger">{{ data.high_vul }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-warning">{{ data.medium_vul }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-info">{{ data.low_vul }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-secondary">{{ data.total_dup }}</span>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    {#    <div class="row">#}
    {#        <div class="col-md-12">#}
    {#            <div class="card">#}
    {#                <div class="card-body">#}
    {#                    <div class="d-md-flex align-items-center">#}
    {#                        <div>#}
    {#                            <h5>Pentest Activity</h5>#}
    {#                            <h5 class="card-subtitle"></h5>#}
    {#                        </div>#}
    {#                    </div>#}
    {#                    <br>#}
    {#                    <div class="row">#}
    {#                        <!-- column -->#}
    {#                        <div class="col-lg-12">#}
    {#                            <div class="table-responsive">#}
    {#                                <table id="data_table" class="table table-striped table-bordered">#}
    {#                                    <thead>#}
    {#                                    <tr>#}
    {#                                        <th>URL</th>#}
    {#                                        <th>Type</th>#}
    {#                                        <th>Date Time</th>#}
    {#                                        <th>Total</th>#}
    {#                                        <th>Critical</th>#}
    {#                                        <th>High</th>#}
    {#                                        <th>Medium</th>#}
    {#                                        <th>Low</th>#}
    {#                                    </tr>#}
    {#                                    </thead>#}
    {#                                    <tbody>{% for data in pentest %}#}
    {#                                        <tr data-target="#">#}
    {#                                            <td width="20%"><a#}
    {#                                                    href="{% url 'pentest:vuln_list' %}?scan_id={{ data.scan_id }}&project_id={{ data.project_id }}">{{ data.scan_url }}</a>#}
    {#                                            </td>#}
    {#                                            <td width="20%">#}
    {#                                                {{ data.pentest_type }}#}
    {#                                            </td>#}
    {#                                            <td>{{ data.date_time }}</td>#}
    {#                                            <td><span#}
    {#                                                    class="badge badge-pill badge-dark">{{ data.total_vul }}</span>#}
    {#                                            </td>#}
    {#                                            <td><span#}
    {#                                                    class="badge badge-pill badge-critical">{{ data.critical_vul }}</span>#}
    {#                                            </td>#}
    {#                                            <td><span#}
    {#                                                    class="badge badge-pill badge-danger">{{ data.high_vul }}</span>#}
    {#                                            </td>#}
    {#                                            <td><span#}
    {#                                                    class="badge badge-pill badge-warning">{{ data.medium_vul }}</span>#}
    {#                                            </td>#}
    {#                                            <td><span#}
    {#                                                    class="badge badge-pill badge-info">{{ data.low_vul }}</span>#}
    {#                                            </td>#}
    {#                                        </tr>#}
    {#                                    {% endfor %}#}
    {#                                    </tbody>#}
    {#                                </table>#}
    {#                            </div>#}
    {#                        </div>#}
    {#                    </div>#}
    {#                </div>#}
    {#            </div>#}
    {#        </div>#}
    {#    </div>#}
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-body">
                    <div class="d-md-flex align-items-center">
                        <div>
                            <h5>Cloud Scan List</h5>
                            <h5 class="card-subtitle"></h5>
                        </div>
                        <div class="ml-auto">
                            <button type="button" class="btn btn-sm btn-light btn-delete-cloud-scan"
                                    data-toggle="tooltip" data-placement="top" title="Delete selected scans">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="table-responsive">
                                <table id="data_table_cloud" class="table table-striped table-bordered">
                                    <thead>
                                    <tr>
                                        <th><label class="customcheckbox m-b-20">
                                            <input type="checkbox" id="mainCheckboxCloud">
                                            <span class="checkmark"></span>
                                        </label>
                                        </th>
                                        <th>Project Name</th>
                                        <th>Scanner</th>
                                        <th>Date Time</th>
                                        <th>Total Vulnerability</th>
                                        <th>Critical</th>
                                        <th>High</th>
                                        <th>Medium</th>
                                        <th>Low</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for data in cloud_scan %}
                                        <tr data-target="#">
                                            <td>{% csrf_token %}
                                                <form>
                                                    <label class="customcheckbox">
                                                        <input type="checkbox" class="listCheckboxCloud"
                                                               value="{{ data.scan_id }}" name="del_scan_id">
                                                        <span class="checkmark"></span>
                                                    </label>
                                                </form>
                                            </td>
                                            <td width="20%">
                                                <a href="{% url 'cloudscanners:list_vuln' %}?scan_id={{ data.scan_id }}&scanner={{ data.scanner }}">{{ data.cloudAccountId }}</a>
                                            </td>
                                         <td>{% with scanType=data.scanner %}
                                                <div class="p-1"><img src="{{ PARSER_DICT | get_icon:scanType }}"
                                                                      alt="user"
                                                                      width="30" class="rounded-circle"
                                                                      data-toggle="tooltip"
                                                                      data-placement="top"
                                                                      title="

                                                                              {{ PARSER_DICT | get_displayName:scanType }}">
                                                </div>
                                            {% endwith %}
                                            </td>
                                            <td width="20%">{{ data.date_time }}</td>
                                            <td><span class="badge badge-pill badge-dark">{{ data.total_vul }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-critical">{{ data.critical_vul }}</span>
                                            </td>
                                            <td><span class="badge badge-pill badge-danger">{{ data.high_vul }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-warning">{{ data.medium_vul }}</span>
                                            </td>
                                            <td><span class="badge badge-pill badge-info">{{ data.low_vul }}</span></td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-body">
                    <div class="d-md-flex align-items-center">
                        <div>
                            <h5>Infrastructure Scan List</h5>
                            <h5 class="card-subtitle"></h5>
                        </div>
                        <div class="ml-auto">
                            <button type="button" class="btn btn-sm btn-light btn-delete-network-scan"
                                    data-toggle="tooltip" data-placement="top" title="Delete selected scans">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="table-responsive">
                                <table id="data_table_Infrastructure" class="table table-bordered data-table">
                                    <thead>
                                    <tr>
                                        <th><label class="customcheckbox m-b-20">
                                            <input type="checkbox" id="mainCheckboxNetwork">
                                            <span class="checkmark"></span>
                                        </label>
                                        </th>
                                        <th>IP</th>
                                        <th>Scanner</th>
                                        <th>Date Time</th>
                                        <th>Total</th>
                                        <th>Critical</th>
                                        <th>High</th>
                                        <th>Medium</th>
                                        <th>Low</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for data in network_dat %}
                                        <tr data-target="#">
                                            <td>{% csrf_token %}
                                                <form>
                                                    <label class="customcheckbox">
                                                        <input type="checkbox" class="listCheckboxNetwork"
                                                               value="{{ data.scan_id }}" name="del_scan_id">
                                                        <span class="checkmark"></span>
                                                    </label>
                                                </form>
                                            </td>
                                            <td width="20%">
                                                <a href="{% url 'networkscanners:list_vuln_info' %}?scan_id={{ data.scan_id }}&ip={{ data.ip }}&scanner={{ data.scanner }}">{{ data.ip }}</a>
                                            </td>
                                            <td width="5%" >{% with scanType=data.scanner %}
                                                <div class="p-1"><img src="{{ PARSER_DICT | get_icon:scanType }}"
                                                                      alt="user"
                                                                      width="30" class="rounded-circle"
                                                                      data-toggle="tooltip"
                                                                      data-placement="top"
                                                                      title="
                                                                              {{ PARSER_DICT | get_displayName:scanType }}">
                                                </div>
                                            {% endwith %}
                                            </td>
                                            <td>{{ data.date_time }}</td>
                                            <td><span class="badge badge-pill badge-dark">{{ data.total_vul }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-critical">{{ data.critical_vul }}</span>
                                            </td>
                                            <td><span class="badge badge-pill badge-danger">{{ data.high_vul }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-warning">{{ data.medium_vul }}</span>
                                            </td>
                                            <td><span class="badge badge-pill badge-info">{{ data.low_vul }}</span></td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-body">
                    <div class="d-md-flex align-items-center">
                        <div>
                            <h5>Compliance Scan List</h5>
                            <h5 class="card-subtitle"></h5>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <!-- column -->
                        <div class="col-lg-12">
                            <div class="table-responsive">
                                <table id="data_table_compliance" class="table table-bordered data-table">
                                    <thead>
                                    <tr>
                                        <th>Project Name</th>
                                        <th>Date Time</th>
                                        <th>Total Complained</th>
                                        <th>Failed</th>
                                        <th>Passed</th>
                                        <th>Skipped</th>
                                    </tr>
                                    </thead>
                                    <tbody>{% for data in inspec_dat %}
                                        <tr data-target="#">
                                            <td>
                                                <a href="{% url 'inspec:inspec_all_vuln' %}?scan_id={{ data.scan_id }}">{{ data.target }}</a>
                                            </td>
                                            <td width="20%" >{{ data.date_time }}</td>
                                            <td><span
                                                    class="badge badge-pill badge-dark">{{ data.total_vuln }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-danger">{{ data.inspec_failed }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-warning">{{ data.inspec_passed }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-info">{{ data.inspec_skipped }}</span>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                    <tbody>{% for data in dockle_dat %}
                                        <tr data-target="#">

                                            <td>
                                                <a href="{% url 'dockle:dockle_all_vuln' %}?scan_id={{ data.scan_id }}">{{ data.target }}</a>
                                            </td>
                                            <td>{{ data.date_time }}</td>
                                            <td><span
                                                    class="badge badge-pill badge-dark">{{ data.total_vuln }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-danger">{{ data.dockle_fatal }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-warning">{{ data.dockle_warn }}</span>
                                            </td>
                                            <td><span
                                                    class="badge badge-pill badge-info">{{ data.dockle_info }}</span>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-body">
                    <br>
                    <div class="d-md-flex align-items-center">
                        <h5>Scan Scheduled List</h5>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="table-responsive">
                                <table id="data_table_schedule" class="table table-striped table-bordered">
                                    <thead>
                                    <tr>
                                        <th>Target</th>
                                        <th>Scanner</th>
                                        <th>Next Schedule Time</th>
                                        <th>Last Status</th>
                                        <th>Periodic Task</th>
                                        <th>Created By</th>
                                    </tr>
                                    </thead>
                                    <tbody>{% for data in all_scheduled_scans %}
                                        <tr data-target="">
                                            <td>
                                                <a>{{ data.target }}</a>
                                            </td>
                                            <td>
                                                {{ data.scanner }}
                                            </td>
                                            <td>
                                                {{ data.schedule_time }}
                                            </td>
                                            <td>
                                                {{ data.status }}
                                            </td>
                                            <td>{{ data.periodic_task | title }}</td>
                                            <td>{{ data.created_by.name }}</td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {
            // Check/Uncheck all checkboxes for Dynamic table
            $("#mainCheckboxDynamic").change(function () {
                $(".listCheckboxDynamic").prop('checked', $(this).prop("checked"));
            });

            // Check/Uncheck all checkboxes for Static table
            $("#mainCheckboxStatic").change(function () {
                $(".listCheckboxStatic").prop('checked', $(this).prop("checked"));
            });

            // Delete button functionality for Dynamic table
            $('.btn-light-del-scan').click(function () {
                if (confirm('Are you sure you want to delete this?')) {
                    var scan_id = [];
                    $.each($("input[name='del_scan_id']:checked"), function () {
                        scan_id.push($(this).val());
                    });

                    var json_scanid = scan_id.join(", ");
                    $.ajax({
                        type: 'POST',
                        url: '{% url 'webscanners:scan_delete' %}',
                        data: {
                            scan_id: json_scanid,
                            csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
                        },
                        success: function () {
                            // Optional: Show a success message
                        }
                    });
                    setTimeout(function () {
                        location.reload();
                    }, 1000);
                }
            });
        });

        $(document).ready(function () {
            // Check/Uncheck all checkboxes for Static table
            $("#mainCheckboxStatic").change(function () {
                $(".listCheckboxStatic").prop('checked', $(this).prop("checked"));
            });

            // Delete button functionality for Static table
            $('.btn-light-del-static-scan').click(function () {
                if (confirm('Are you sure you want to delete this?')) {
                    var scan_id = [];
                    $.each($("input[name='del_scan_id']:checked"), function () {
                        scan_id.push($(this).val());
                    });

                    var json_scanid = scan_id.join(", ");
                    $.ajax({
                        type: 'POST',
                        url: '{% url 'staticscanners:scan_delete' %}',
                        data: {
                            scan_id: json_scanid,
                            csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
                        },
                        success: function () {
                            // Optional: Show a success message
                        }
                    });
                    setTimeout(function () {
                        location.reload();
                    }, 1200);
                }
            });
        });
        $(document).ready(function () {
            // Check/Uncheck all checkboxes for Cloud table
            $("#mainCheckboxCloud").change(function () {
                $(".listCheckboxCloud").prop('checked', $(this).prop("checked"));
            });

            // Check/Uncheck all checkboxes for Network table
            $("#mainCheckboxNetwork").change(function () {
                $(".listCheckboxNetwork").prop('checked', $(this).prop("checked"));
            });

            // Delete button functionality for Cloud table
            $('.btn-delete-cloud-scan').click(function () {
                if (confirm('Are you sure you want to delete this?')) {
                    var scan_id = [];
                    $.each($("input[name='del_scan_id']:checked"), function () {
                        scan_id.push($(this).val());
                    });

                    var json_scanid = scan_id.join(", ");
                    $.ajax({
                        type: 'POST',
                        url: '{% url 'cloudscanners:scan_delete' %}',
                        data: {
                            scan_id: json_scanid,
                            csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
                        },
                        success: function () {
                            // Optional: Show a success message
                        }
                    });
                    setTimeout(function () {
                        location.reload();
                    }, 1200);
                }
            });

            // Delete button functionality for Network table
            $('.btn-delete-network-scan').click(function () {
                if (confirm('Are you sure you want to delete this?')) {
                    var scan_id = [];
                    $.each($("input[name='del_scan_id']:checked"), function () {
                        scan_id.push($(this).val());
                    });

                    var json_scanid = scan_id.join(", ");
                    $.ajax({
                        type: 'POST',
                        url: '{% url 'networkscanners:scan_delete' %}',
                        data: {
                            scan_id: json_scanid,
                            csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
                        },
                        success: function () {
                            // Optional: Show a success message
                        }
                    });
                    setTimeout(function () {
                        location.reload();
                    }, 1200);
                }
            });
        });


    </script>


{% endblock %}